@using StockPortfolio.Helpers 
@using StockPortfolio.Models 


<div class="row stocks-grid">
    <TelerikGrid Data="@Data" Sortable="true" SelectionMode="GridSelectionMode.Single" Pageable="true" PageSize="@PageSize">
        <GridColumns>
            <GridCommandColumn Width="55px">
                <GridCommandButton Command="Delete" Icon="delete" Primary="true" OnClick="@DeleteHandler" />
            </GridCommandColumn>

            <GridColumn Field="@nameof(Stock.Symbol)" Title="Symbol" />
            <GridColumn Field="@nameof(Stock.Price)" Title="Price">
                <Template>
                    @{ var stock = context as Stock;
                        <strong>@("$"+stock.Price)</strong>
                    }
                </Template>
            </GridColumn>

            @if (SmallBrowserSize)
            {
                <GridColumn Field="@nameof(Stock.ChangePercentage)" Title="Change Percentage">
                    <Template>
                        @{
                            var stock = context as Stock;
                            var changePercentage = stock.ChangePercentage;
                            string textColor = changePercentage > 0 ? "text-green-400" : "text-red-400";
                            <span class="@textColor">@changePercentage%</span>
                        }
                    </Template>
                </GridColumn>
            }

            @if (MediumBrowserSize)
            {
                <GridColumn Field="@nameof(Stock.MarketCap)" Title="Market Cap">
                    <Template>
                        @{ var stock = context as Stock;
                            string formattedDecimal = DecimalFormatter.FormatDecimal(stock.MarketCap);
                            <span>@formattedDecimal</span>
                        }
                    </Template>
                </GridColumn>
            }

            @if (LargeBrowserSize)
            {
                <GridColumn Field="@nameof(Stock.PricePerEarningRatio)" Title="PE Ratio">
                    <Template>
                        @{ var stock = context as Stock;
                            var peRatio = stock.PricePerEarningRatio;
                            string textColor = peRatio > 40 ? "text-green-400" : "text-yellow-400";
                            <span class="@textColor">@peRatio</span>
                        }
                    </Template>
                </GridColumn>
            }
        </GridColumns>
    </TelerikGrid>
</div>